---
import MobileMenuFooter from 'virtual:starlight/components/MobileMenuFooter';
import SidebarPersister from '@astrojs/starlight/components/SidebarPersister.astro';
import SidebarSublist from '@astrojs/starlight/components/SidebarSublist.astro';
import PrimaryTabs from '@components/shared/PrimaryTabs.astro';

const { sidebar } = Astro.locals.starlightRoute;
---

<div class="pl-mobile-section-chips md:sl-hidden">
  <PrimaryTabs class="pl-chip-tabs" />
</div>

<SidebarPersister>
	<SidebarSublist sublist={sidebar} />
</SidebarPersister>

<div class="md:sl-hidden">
	<MobileMenuFooter />
</div>

<style>
  @layer starlight.core {
    .pl-mobile-section-chips {
      padding-bottom: 0.75rem;
      margin-bottom: 0.5rem;
      border-bottom: 1px solid var(--pl-header-border, var(--sl-color-gray-6));
    }

    .pl-mobile-section-chips :global(.pl-chip-tabs) {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin: 0;
      align-items: center;
    }

    .pl-mobile-section-chips :global(.pl-chip-tabs .pl-site-tab) {
      padding: 0.32rem 0.65rem;
      font-size: 0.82rem;
      font-weight: 500;
      border: 1px solid var(--sl-color-gray-5);
      border-radius: 999px;
      color: var(--pl-tab-fg);
      background: transparent;
      white-space: nowrap;
    }

    .pl-mobile-section-chips :global(.pl-chip-tabs .pl-site-tab:hover) {
      border-color: var(--pl-tab-fg-hover, var(--sl-color-gray-3));
      color: var(--pl-tab-fg-hover);
    }

    .pl-mobile-section-chips :global(.pl-chip-tabs .pl-site-tab.active) {
      background: var(--pl-tab-fg-active, #6366f1);
      border-color: var(--pl-tab-fg-active, #6366f1);
      color: #fff;
    }

    .pl-mobile-section-chips :global(.pl-chip-tabs .pl-site-tab::after) {
      display: none;
    }

    .pl-mobile-section-chips :global(.pl-chip-tabs .pl-site-tab .pl-site-tab-icon) {
      width: 0.9rem;
      height: 0.9rem;
      opacity: 0.8;
    }

    .pl-mobile-section-chips :global(.pl-chip-tabs .pl-site-tab.active .pl-site-tab-icon) {
      opacity: 1;
    }
  }
</style>
