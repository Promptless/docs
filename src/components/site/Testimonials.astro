---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro:assets';

import mannyImg from '../../assets/site/manny.jpeg';
import alanImg from '../../assets/site/alan.jpeg';
import moImg from '../../assets/site/mo.jpeg';
import aaronImg from '../../assets/site/aaron.jpeg';
import eduardoImg from '../../assets/site/eduardo.jpeg';
import nicholasImg from '../../assets/site/nicholas.jpeg';
import docDetectiveLogo from '../../assets/site/logos/doc-detective.png';

interface Testimonial {
  quote: string;
  author: string;
  title: string;
  company: string;
  companyLogo: ImageMetadata | string;
  image: ImageMetadata;
}

interface Props {
  items?: Testimonial[];
}

const defaultItems: Testimonial[] = [
  {
    quote:
      'Promptless is a core part of my self-healing docs toolchain, proactively fixing problems before I knew I had them.',
    author: 'Manny Silva',
    title: 'Creator',
    company: 'Doc Detective',
    companyLogo: docDetectiveLogo,
    image: mannyImg,
  },
  {
    quote:
      'This is the most "make something people want" feature I have ever seen. It solves my problem in a better way than I thought would be possible.',
    author: 'Alan Mond',
    title: 'Docs Maintainer',
    company: 'Bazel',
    companyLogo: '/site/logos/bazel-icon.png',
    image: alanImg,
  },
  {
    quote:
      'Promptless dramatically speeds up my time-to-first-draft. My team literally calls me a 10x tech writer.',
    author: 'Mo King',
    title: 'Senior Technical Writer',
    company: 'Runpod',
    companyLogo: '/site/logos/runpod.png',
    image: moImg,
  },
  {
    quote:
      "Promptless updates every relevant section of our docs, catching both the latest changes and old spots we'd missed. It feels like magic.",
    author: 'Aaron Levin',
    title: 'Founding Solutions Engineer',
    company: 'Vellum',
    companyLogo: '/site/logos/vellum-icon.svg',
    image: aaronImg,
  },
  {
    quote: 'I love your product. It works incredibly well and basically pays for itself right away.',
    author: 'Eduardo Soubihe',
    title: 'CTO',
    company: 'Latitude.sh',
    companyLogo: '/site/logos/latitude.svg',
    image: eduardoImg,
  },
  {
    quote: "Promptless is a solo tech writer's godsend.",
    author: 'Nicholas DeWald',
    title: 'Head of Developer Docs',
    company: 'Prove',
    companyLogo: '/site/logos/prove-icon.svg',
    image: nicholasImg,
  },
];

const { items = defaultItems } = Astro.props;
---

<section id="testimonials" class="pl-site-testimonials" aria-label="Testimonials">
  <h2>Writers, developers, and founders all love Promptless</h2>
  <div class="pl-site-testimonials-grid">
    {
      items.map((item) => (
        <blockquote class="pl-site-testimonial">
          <p class="pl-site-testimonial-quote">{item.quote}</p>
          <div class="pl-site-testimonial-footer">
            <div class="pl-site-testimonial-person">
              <Image src={item.image} alt={item.author} loading="lazy" width={80} height={80} />
              <div class="pl-site-testimonial-meta">
                <p class="pl-site-testimonial-author">{item.author}</p>
                <p class="pl-site-testimonial-title">{item.title}</p>
                <p class="pl-site-testimonial-employer">{item.company}</p>
              </div>
            </div>
            <div class="pl-site-testimonial-company">
              {typeof item.companyLogo === 'string' ? (
                <img src={item.companyLogo} alt={`${item.company} logo`} loading="lazy" />
              ) : (
                <Image src={item.companyLogo} alt={`${item.company} logo`} loading="lazy" width={40} height={40} />
              )}
            </div>
          </div>
        </blockquote>
      ))
    }
  </div>
</section>
