---
import GrowthBundleSelector from './pricing/GrowthBundleSelector.astro';
import PricingCard from './pricing/PricingCard.astro';
import {
  ENTERPRISE_FEATURES,
  ENTERPRISE_PLAN,
  GROWTH_BUNDLE_OPTIONS,
  GROWTH_FEATURES,
  GROWTH_PLAN,
  STARTUP_DOC_UNITS,
  STARTUP_FEATURES,
  STARTUP_MONTHLY_USD,
  STARTUP_PLAN,
  formatPages,
  formatMonthlyUsd,
} from './pricing/pricing.config';

const defaultGrowthBundle = GROWTH_BUNDLE_OPTIONS[0];
---

<section class="pl-site-pricing" id="plans">
  <p class="pl-site-pricing-trial-badge">All plans include a 30-day free trial.</p>
  <p class="pl-site-pricing-intro">Pricing scales with the size and complexity of your docs site.</p>
  <p class="pl-site-pricing-oss-line">
    Open-source, non-commercial project? <a href="https://promptless.ai/docs/getting-started/promptless-oss">Learn about our OSS program</a>.
  </p>

  <div class="pl-site-pricing-grid">
    <PricingCard
      planId={STARTUP_PLAN.id}
      title={STARTUP_PLAN.title}
      summary={STARTUP_PLAN.summary}
      priceLabel={`${formatMonthlyUsd(STARTUP_MONTHLY_USD)}/mo`}
      usageLabel={`Up to ${formatPages(STARTUP_DOC_UNITS)}`}
      features={STARTUP_FEATURES}
      ctaLabel={STARTUP_PLAN.ctaLabel}
      ctaHref={STARTUP_PLAN.ctaHref}
      ctaAction={STARTUP_PLAN.ctaAction}
    />

    <PricingCard
      planId={GROWTH_PLAN.id}
      title={GROWTH_PLAN.title}
      summary={GROWTH_PLAN.summary}
      priceLabel={defaultGrowthBundle.priceLabel}
      leadIn="Everything in Startup, plus"
      features={GROWTH_FEATURES}
      ctaLabel={GROWTH_PLAN.ctaLabel}
      ctaHref={GROWTH_PLAN.ctaHref}
      ctaAction={GROWTH_PLAN.ctaAction}
      priceDataAttr="data-growth-price"
    >
      <GrowthBundleSelector slot="selector" bundles={GROWTH_BUNDLE_OPTIONS} selectedBundleId={defaultGrowthBundle.id} />
    </PricingCard>

    <PricingCard
      planId={ENTERPRISE_PLAN.id}
      title={ENTERPRISE_PLAN.title}
      summary={ENTERPRISE_PLAN.summary}
      priceLabel="Custom"
      usageLabel="Unlimited Pages"
      leadIn="Everything in Growth, plus"
      features={ENTERPRISE_FEATURES}
      ctaLabel={ENTERPRISE_PLAN.ctaLabel}
      ctaHref={ENTERPRISE_PLAN.ctaHref}
      ctaAction={ENTERPRISE_PLAN.ctaAction}
    />
  </div>

  <p class="pl-site-pricing-footnote">
    * Pages are normalizedâ€”a long API reference counts as multiple pages, while short changelog entries may share one.
  </p>
</section>
