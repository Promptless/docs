{
  "tests": [
    {
      "testId": "clerk-login",
      "description": "Sign in to Promptless with test credentials",
      "steps": [
        {
          "description": "Reset onboarding state for test org",
          "runShell": {
            "command": "psql $DATABASE_URL -c \"UPDATE customer_info SET onboarding_completed = false, onboarding_info = '{}'::jsonb WHERE org_id = '$PROMPTLESS_TEST_ORG_ID';\""
          }
        },
        {
          "description": "Navigate to the sign-in page",
          "goTo": "https://accounts.gopromptless.ai/sign-in"
        },
        {
          "description": "Click the email input",
          "find": {
            "selector": "#identifier-field",
            "click": true
          }
        },
        {
          "description": "Type the test email",
          "type": "$PROMPTLESS_TEST_EMAIL"
        },
        {
          "description": "Click Continue after email",
          "find": {
            "selector": "button.cl-formButtonPrimary",
            "click": true,
            "timeout": 5000
          }
        },
        {
          "description": "Wait for password page to load",
          "wait": 3000
        },
        {
          "description": "Click the password input",
          "find": {
            "selector": "#password-field",
            "click": true,
            "timeout": 10000
          }
        },
        {
          "description": "Type the test password",
          "type": "$PROMPTLESS_TEST_PASSWORD"
        },
        {
          "description": "Click Continue to sign in",
          "find": {
            "selector": "button.cl-formButtonPrimary",
            "click": true,
            "timeout": 5000
          }
        },
        {
          "description": "Wait for sign-in to complete",
          "wait": 5000
        }
      ]
    }
  ]
}
